{% extends "base.html" %}

{% block title %}Store Dashboard - Smart QR Shopping{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Store Owner Dashboard</h1>
    </div>

    <!-- Store Registration Section -->
    <div id="store-registration" class="card">
        <h2>Register Your Store</h2>
        <form onsubmit="handleStoreRegistration(event)">
            <div class="form-group">
                <label>Store Name</label>
                <input type="text" id="store-name" required>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="store-description" rows="3"></textarea>
            </div>
            <button type="submit" class="btn-primary">Register Store</button>
        </form>
    </div>

    <!-- Store Management Section -->
    <div id="store-management" style="display: none;">
        <div class="card" style="background: linear-gradient(135deg, #0f172a, #1e293b); color: white;">
            <h2>Management Console</h2>
            <p style="opacity: 0.8; margin-bottom: 1.5rem;">Manage your smart inventory and view live analytics</p>
            <div style="display: flex; gap: 15px;">
                <a href="{{ url_for('owner_page') }}" class="btn-primary"
                    style="flex: 1; background: linear-gradient(135deg, #6366f1, #a855f7); border: none; text-decoration: none; display: flex; align-items: center; justify-content: center; padding: 1.2rem; font-size: 1.1rem; border-radius: 12px; font-weight: 600;">
                    ðŸš€ Open Premium QR Studio
                </a>
            </div>
        </div>

        <div class="grid">
            <!-- Incoming Orders Section -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h3 style="margin: 0;">ðŸ“¦ Current Orders</h3>
                    <button onclick="loadOrders()" class="btn-secondary"
                        style="padding: 5px 15px; font-size: 0.8rem;">Refresh</button>
                </div>
                <div id="orders-list">
                    <p style="color: #7f8c8d; font-style: italic;">No new orders yet.</p>
                </div>
            </div>

            <!-- High Demand Products Section -->
            <div class="card">
                <h3 style="color: #e74c3c; margin-bottom: 1.5rem;">ðŸ”¥ High Demand (Customer Requests)</h3>
                <div id="high-demand-list">
                    <p style="color: #7f8c8d; font-style: italic;">Loading requests...</p>
                </div>
            </div>
        </div>

        <!-- Products List -->
        <div class="card">
            <h3>Your Live Products</h3>
            <div id="products-list" class="grid">
                <!-- Products will be loaded here -->
            </div>
        </div>

        <!-- Analytics Quick View -->
        <div class="card">
            <h3>Performance Summary</h3>
            <div class="analytics-grid"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 1rem;">
                <div class="analytics-card"
                    style="background: #f8fafc; padding: 20px; border-radius: 12px; text-align: center;">
                    <h4 style="margin: 0; color: #64748b;">Total Sales</h4>
                    <p id="total-orders" class="analytics-number"
                        style="font-size: 2rem; font-weight: 700; margin: 10px 0; color: #1e293b;">0</p>
                </div>
                <div class="analytics-card" style="background: #f8fafc; padding: 20px; border-radius: 12px;">
                    <h4 style="margin: 0 0 10px 0; color: #64748b; text-align: center;">Most Scanned</h4>
                    <div id="most-scanned"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/store.js') }}"></script>
{% endblock %}