{% extends "base.html" %}

{% block title %}Store Dashboard - Smart QR Shopping{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Store Owner Dashboard</h1>
    </div>

    <!-- Store Registration Section -->
    <div id="store-registration" class="card">
        <h2>Register Your Store</h2>
        <form onsubmit="handleStoreRegistration(event)">
            <div class="form-group">
                <label>Store Name</label>
                <input type="text" id="store-name" required>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="store-description" rows="3"></textarea>
            </div>
            <button type="submit" class="btn-primary">Register Store</button>
        </form>
    </div>

    <!-- Store Management Section -->
    <div id="store-management" style="display: none;">
        <div class="card">
            <h2>Product Management</h2>
            <div style="display: flex; gap: 10px;">
                <a href="{{ url_for('owner_page') }}" class="btn-primary"
                    style="background: linear-gradient(135deg, #6366f1, #a855f7); border: none; text-decoration: none; display: flex; align-items: center; justify-content: center; width: 100%; padding: 1.2rem; font-size: 1.1rem; border-radius: 12px;">
                    ðŸš€ Open Premium QR Studio
                </a>
            </div>
        </div>

        <!-- Products List -->
        <div class="card">
            <h3>Your Products</h3>
            <div id="products-list" class="grid">
                <!-- Products will be loaded here -->
            </div>
        </div>

        <!-- Incoming Orders Section -->
        <div class="card">
            <h3>Incoming Orders</h3>
            <div id="orders-list">
                <p>Waiting for new orders...</p>
            </div>
            <button onclick="loadOrders()" class="btn-secondary" style="margin-top: 10px;">Refresh Orders</button>
        </div>

        <!-- High Demand Products Section -->
        <div class="card high-demand-section">
            <h3 style="color: #e74c3c;">ðŸ”¥ High Demand Products (Customer Requests)</h3>
            <div id="high-demand-list">
                <p>Loading requests...</p>
            </div>
        </div>

        <!-- Analytics Section -->
        <div class="card">
            <h3>Analytics</h3>
            <div class="analytics-grid">
                <div class="analytics-card">
                    <h4>Total Orders</h4>
                    <p id="total-orders" class="analytics-number">0</p>
                </div>
                <div class="analytics-card">
                    <h4>Most Scanned Products</h4>
                    <div id="most-scanned"></div>
                </div>
                <div class="analytics-card">
                    <h4>Most Requested Products</h4>
                    <div id="most-requested"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/store.js') }}"></script>
{% endblock %}